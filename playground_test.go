package main

import (
	"crypto/md5"
	"encoding/hex"
	"fmt"
	"github.com/stretchr/testify/require"
	"io"
	"net/http"
	"os"
	"sort"
	"strings"
	"testing"
)

const (
	privateKey = "b476ff4e291877c1b83b052905d6f229ae290cc1"
	publicKey1 = "ce46f2337ef14943fb51ca558229163e7444f93b"
	publicKey2 = "3bf21d8608473090625e102f5bcdb026"
)

func TestOKOK(t *testing.T) {
	q := `appVersion=2107015&os=android&osVersion=30&length=20&cTime=1637095026330&lastIndex=0&keyword=yêu vội vàng&searchSessionId=f2dfed9ba6714b75bd02968ef0ae0de0&deviceId=1869ac5379584a14&zDeviceId=2002.SSZ-wu8DGTLrXQddcmj2d261jxEN6qwRCyx-iPOTIPamXlspbrP8c321_R4rCZG.1`
	m := make(map[string]string)
	var keys []string
	for _, param := range strings.Split(q, "&") {
		parts := strings.SplitN(param, "=", 2)
		key := parts[0]
		value := parts[1]
		m[key] = value
		keys = append(keys, key)
	}

	sort.Strings(keys)
	q = ""
	for _, key := range keys {
		q = fmt.Sprintf("%s%s=%s&", q, key, m[key])
	}
	q += privateKey

	hash := md5.New()
	_, err := hash.Write([]byte(q))
	require.NoError(t, err)
	digest := hash.Sum(nil)
	sig := hex.EncodeToString(digest)

	url := fmt.Sprintf("https://api.zingmp3.app/v1/search/core/get/list-song?sig=%s&length=20&cTime=1637095026330&lastIndex=0&keyword=y%%C3%%AAu%%20v%%E1%%BB%%99i%%20v%%C3%%A0ng&searchSessionId=f2dfed9ba6714b75bd02968ef0ae0de0&publicKey=%s", sig, publicKey2)
	/*
		{"err":0,"msg":"Success","sTime":1637095550336,"data":{"items":[{"type":1,"id":1075525434,"title":"Yêu Vội Vàng","artists":[{"id":24591,"name":"Lê Bảo Bình","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/1/a/6/4/1a64e2dc5c3e3b9c54ae0af12a62ec25.jpg","oaId":24591,"followers":854749}],"albums":[{"id":1089307568,"title":"Hỏi Thăm Nhau"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":12109,"name":"V-Pop","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/5\/0\/5\/1\/50515f6e2cf3a1293344d6241d13d33f.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_png/covers/a/5/a55db8b18b37cb07be9a4a5f1903cae1_1479465454.png","duration":317,"link":"https://zingmp3.vn/bai-hat/Yeu-Voi-Vang-Le-Bao-Binh/ZW7U87BA.html","modifiedTime":1608029515000,"radioPid":1285194540,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/2017/07/24/9e98ad6814f35c1eced2ed13a4a916c1_1075525434.lrc","lyricId":"7006053","downloadTypes":"64,128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6254,"hLyricVersion":21,"kaka":{"schemeAndroid":"kaka://beat_detail?id=IWZA7DBC&src=[source]","schemeIos":"kahat://beat_detail?id=IWZA7DBC&src=[source]"},"status":1,"playStatus":2,"downloadStatus":2,"video":{"status":1,"playStatus":2,"downloadStatus":2}},{"type":1,"id":1075787607,"title":"Yêu Vội Vàng (Remix)","artists":[{"id":24591,"name":"Lê Bảo Bình","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/1/a/6/4/1a64e2dc5c3e3b9c54ae0af12a62ec25.jpg","oaId":24591,"followers":854749}],"albums":[{"id":1089307568,"title":"Hỏi Thăm Nhau"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":66,"name":"Dance Việt","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/8\/6\/f\/d\/86fdf54a8288b33ce6a6f05c5ae27884.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_png/covers/a/5/a55db8b18b37cb07be9a4a5f1903cae1_1479465454.png","duration":272,"link":"https://zingmp3.vn/bai-hat/Yeu-Voi-Vang-Remix-Le-Bao-Binh/ZW7887D7.html","modifiedTime":1608027517000,"radioPid":1285259209,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/2017/12/23/593086fad8fca55affe3dc3e4aae1a82_1075787607.lrc","lyricId":"5013667","downloadTypes":"64,128,320","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6246,"hLyricVersion":21,"kaka":{"schemeAndroid":"kaka://beat_detail?id=IWZA80WE&src=[source]","schemeIos":"kahat://beat_detail?id=IWZA80WE&src=[source]"},"status":1,"playStatus":2,"downloadStatus":2},{"type":1,"id":1073743487,"title":"Một Tình Yêu Vội Vàng","artists":[{"id":306,"name":"Bằng Kiều","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/8/4/84d49670aa357051bd72b18ce0feedd8_1446460401.jpg","oaId":306,"followers":90437},{"id":455,"name":"Minh Tuyết","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/e/8/8/a/e88ab66e90313460dcd9a96947170ee0.jpg","oaId":455,"followers":114303}],"albums":[{"id":1073741965,"title":"Linh Hồn Đã Mất"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":11,"name":"Nhạc Trữ Tình","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/a\/8\/3\/8\/a838f4af71976f7118f75354d0ba9fc0.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_jpeg/covers/8/9/89af1855ce349828e851a9fe834afc80_1285432832.jpg","duration":312,"link":"https://zingmp3.vn/bai-hat/Mot-Tinh-Yeu-Voi-Vang-Bang-Kieu-Minh-Tuyet/ZWZ9Z6FF.html","modifiedTime":1612407290000,"radioPid":1282263955,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/2016/a/a/aae721ae58a1efb8ea43cf8d16e528e7_1073743487.lrc","lyricId":"2001663","downloadTypes":"64,128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6246,"hLyricVersion":21,"kaka":{"schemeAndroid":"kaka://beat_detail?id=IWZAOICF&src=[source]","schemeIos":"kahat://beat_detail?id=IWZAOICF&src=[source]"},"status":1,"playStatus":2,"downloadStatus":2},{"type":1,"id":1083193680,"title":"Cứ Vội Vàng","artists":[{"id":789063,"name":"Rô Ti","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/6/c/8/b/6c8b5c9dcb4796bae80150fd280bc0c2.jpg","followers":18332}],"albums":[{"id":1389041825,"title":"Cứ Vội Vàng (Single)"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":12109,"name":"V-Pop","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/5\/0\/5\/1\/50515f6e2cf3a1293344d6241d13d33f.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_jpeg/cover/b/2/9/b/b29bfeee43b8e65c365b0c90eb56dfec.jpg","duration":328,"link":"https://zingmp3.vn/bai-hat/Cu-Voi-Vang-Ro-Ti/ZWE989D0.html","modifiedTime":1608019124000,"radioPid":1389121095,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/d/5/3/3/d533c86d0e396edefea39feb176fcb19.lrc","lyricId":"7114583","downloadTypes":"128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6374,"hLyricVersion":21,"releaseTime":1603093800000,"kaka":{"schemeAndroid":"kaka://beat_detail?id=IWZAUZAA&src=[source]","schemeIos":"kahat://beat_detail?id=IWZAUZAA&src=[source]"},"status":1,"playStatus":2,"downloadStatus":2},{"type":1,"id":1076435999,"title":"Vội Vàng Yêu Anh","artists":[{"id":6416,"name":"Hạnh Sino","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/7/b/7b0beb52de5a2f2b4037dda7c3200437_1515119282.jpg","oaId":6416,"followers":7595}],"albums":[{"id":1091580984,"title":"Vội Vàng Yêu Anh (Single)"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":12109,"name":"V-Pop","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/5\/0\/5\/1\/50515f6e2cf3a1293344d6241d13d33f.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_jpeg/covers/e/3/e3756cb97e65a35a02f7b2bccdddd62a_1510709994.jpg","duration":242,"link":"https://zingmp3.vn/bai-hat/Voi-Vang-Yeu-Anh-Hanh-Sino/ZW8W6C9F.html","modifiedTime":1608024832000,"radioPid":1285848036,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/2017/7/2/720ad1ac0f373173320a9af15f9eb05e.lrc","lyricId":"7016633","downloadTypes":"128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6254,"hLyricVersion":21,"kaka":{"schemeAndroid":"kaka://beat_detail?id=IWZBWFDE&src=[source]","schemeIos":"kahat://beat_detail?id=IWZBWFDE&src=[source]"},"status":1,"playStatus":2,"downloadStatus":2,"video":{"status":1,"playStatus":2,"downloadStatus":2}},{"type":1,"id":1084429062,"title":"Cứ Vội Vàng","artists":[{"id":3879,"name":"Minh Vương M4U","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/8/1/8142308a12a798886cc342e51b436fec_1511496189.jpg","oaId":3879,"followers":170937},{"id":809528,"name":"ACV","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/5/e/0/6/5e06d48fb79175a096e059ecf3d8b1e8.jpg","followers":95227}],"albums":[{"id":1390851597,"title":"Cứ Vội Vàng (Single)"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":12109,"name":"V-Pop","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/5\/0\/5\/1\/50515f6e2cf3a1293344d6241d13d33f.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_jpeg/cover/5/1/0/0/5100dd89fe120cbc62025ccfc4b583fc.jpg","duration":302,"link":"https://zingmp3.vn/bai-hat/Cu-Voi-Vang-Minh-Vuong-M4U-ACV/ZWFC6O86.html","modifiedTime":1608202950000,"radioPid":1390914751,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/2/d/7/a/2d7a7cd1e006764f83a98fec61bf0117.lrc","lyricId":"7115751","downloadTypes":"128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6382,"hLyricVersion":21,"releaseTime":1604833200000,"status":1,"playStatus":2,"downloadStatus":2,"video":{"status":1,"playStatus":2,"downloadStatus":2}},{"type":1,"id":1075500410,"title":"Vội Vàng","artists":[{"id":15011,"name":"Tạ Quang Thắng","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/5/0/5046e7816d28c022c70d8f12d7f7f53f_1512095738.jpg","followers":3552}],"albums":[{"id":1073933425,"title":"Vội Vàng"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":12109,"name":"V-Pop","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/5\/0\/5\/1\/50515f6e2cf3a1293344d6241d13d33f.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_jpeg/covers/e/2/e20e0f0e13ccbcd558a05d07a1c1ca26_1461060813.jpg","duration":235,"link":"https://zingmp3.vn/bai-hat/Voi-Vang-Ta-Quang-Thang/ZW7UWZFA.html","modifiedTime":1608029843000,"radioPid":1285167920,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/b/5/1/8/b518cd51d843a28170b31a0dfc74c5bb.lrc","lyricId":"3758591","downloadTypes":"64,128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6254,"hLyricVersion":21,"kaka":{"schemeAndroid":"kaka://beat_detail?id=IWZA7DUA&src=[source]","schemeIos":"kahat://beat_detail?id=IWZA7DUA&src=[source]"},"status":1,"playStatus":2,"downloadStatus":2,"video":{"status":1,"playStatus":2,"downloadStatus":2}},{"type":1,"id":1073857592,"title":"Yêu Vội Vàng","artists":[{"id":2430,"name":"Trần Tâm","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/d/e/de70fd11629ed2ea37890102895f9e18_1318784697.jpg","followers":3006}],"albums":[{"id":1073753298,"title":"Nạn Nhân Tình Yêu"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_jpeg/covers/d/4/d4236dcb448bf1b5e0834de319da324e_1300075519.jpg","duration":279,"link":"https://zingmp3.vn/bai-hat/Yeu-Voi-Vang-Tran-Tam/ZWZBIUB8.html","modifiedTime":1608048665000,"radioPid":1282389677,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/2/a/3/0/2a301ab3680aa57277f670bf9aa11cd8.lrc","lyricId":"2115768","downloadTypes":"64,128,320","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6246,"releaseTime":1136048400000,"status":1,"playStatus":2,"downloadStatus":2},{"type":1,"id":1078180752,"title":"Đừng Vội Vàng Đổi Thay","artists":[{"id":12498,"name":"Cao Tùng Anh","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/f/d/fd4ed57c86e4fba5578737680ad7e6a7_1510288375.jpg","oaId":12498,"followers":23766}],"albums":[{"id":1098760285,"title":"Đừng Vội Vàng Đổi Thay (Single)"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":12109,"name":"V-Pop","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/5\/0\/5\/1\/50515f6e2cf3a1293344d6241d13d33f.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_jpeg/cover/6/3/d/b/63dbfee43ebf63551fd6078dc8e18df3.jpg","duration":281,"link":"https://zingmp3.vn/bai-hat/Dung-Voi-Vang-Doi-Thay-Cao-Tung-Anh/ZW9D0CI0.html","modifiedTime":1608023260000,"radioPid":1285924551,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/3/b/3/2/3b32546b2d777ee456bd918753d9812a.lrc","lyricId":"7049747","downloadTypes":"64,128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6246,"hLyricVersion":21,"kaka":{"schemeAndroid":"kaka://beat_detail?id=IWZA87I7&src=[source]","schemeIos":"kahat://beat_detail?id=IWZA87I7&src=[source]"},"status":1,"playStatus":2,"downloadStatus":2},{"type":1,"id":1076323435,"title":"Yêu Vội Vàng","artists":[{"id":73021,"name":"Lý Kiến Hào","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/4/9/c/3/49c327a30bdbb1c52f64453d47d9e59e.jpg","followers":142}],"albums":[],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":12109,"name":"V-Pop","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/5\/0\/5\/1\/50515f6e2cf3a1293344d6241d13d33f.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_png/avatars/d/9/d92b07929a5e68804c71d4fa2a4ae473_1500347593.png","duration":309,"link":"https://zingmp3.vn/bai-hat/Yeu-Voi-Vang-Ly-Kien-Hao/ZW80BUEB.html","modifiedTime":1608025494000,"radioPid":1285820210,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/b/7/3/1/b7316d7608473861b45b8c55d7f59329.lrc","lyricId":"7031774","downloadTypes":"128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6246,"status":1,"playStatus":2,"downloadStatus":2},{"type":1,"id":1076460224,"title":"Yêu Vội Vàng (Cover)","artists":[{"id":105141,"name":"Đào Nguyễn Ánh","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_png/avatars/2/8/2813608111e8e4c843de9428fe17beaf_1512386673.png","followers":4715}],"albums":[{"id":1091583907,"title":"Yêu Vội Vàng (Cover) (Single)"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":12109,"name":"V-Pop","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/5\/0\/5\/1\/50515f6e2cf3a1293344d6241d13d33f.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_png/covers/9/f/9fd9b9195b1d14365e1cb4a13280a6a6_1513135871.png","duration":316,"link":"https://zingmp3.vn/bai-hat/Yeu-Voi-Vang-Cover-Dao-Nguyen-Anh/ZW8WCBU0.html","modifiedTime":1608024635000,"radioPid":1285856890,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/2017/c/b/cb7f280188feed947ed201e7bdcfd4a7.lrc","lyricId":"7023569","downloadTypes":"128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6246,"hLyricVersion":21,"status":1,"playStatus":2,"downloadStatus":2},{"type":1,"id":1074983004,"title":"Vội Vã Yêu Nhau Vội Vã Rời","artists":[{"id":242,"name":"Lương Bích Hữu","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/d/b/7/0/db7009be5cb06fe68704ec4160d8160d.jpg","oaId":242,"followers":89832},{"id":2879,"name":"Ngô Kiến Huy","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/0/c/6/b/0c6ba1113d9a956dae7be749ea023ddb.jpg","oaId":2879,"followers":162608}],"albums":[{"id":1073890926,"title":"Giá Một Lần Hoán Đổi"},{"id":1073876852,"title":"Vội Vã Yêu Nhau Vội Vã Rời"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":12109,"name":"V-Pop","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/5\/0\/5\/1\/50515f6e2cf3a1293344d6241d13d33f.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_jpeg/covers/c/2/c270eb7dd0e8b6b2e46e7b8efb3a1362_1414558307.jpg","duration":310,"link":"https://zingmp3.vn/bai-hat/Voi-Va-Yeu-Nhau-Voi-Va-Roi-Luong-Bich-Huu-Ngo-Kien-Huy/ZW6CU0DC.html","modifiedTime":1608034530000,"radioPid":1283914880,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/2015/4/e/4e7a203c6ce747cd1d56b713fea59fc3_1074983004.lrc","lyricId":"1383510","downloadTypes":"64,128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6254,"hLyricVersion":21,"releaseTime":1388509200000,"status":1,"playStatus":2,"downloadStatus":2,"video":{"status":1,"playStatus":2,"downloadStatus":2}},{"type":1,"id":1112225304,"title":"Yêu Vội","artists":[{"id":2788,"name":"Huyền Thoại","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/3/e/9/f/3e9fe6d7cdfb567aa4565089162f72a6.jpg","followers":4718}],"albums":[{"id":1462032886,"title":"Yêu Vội (Single)"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":12109,"name":"V-Pop","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/5\/0\/5\/1\/50515f6e2cf3a1293344d6241d13d33f.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_jpeg/cover/4/a/5/b/4a5bf327428191ca095d2ce99eb9a356.jpg","duration":307,"link":"https://zingmp3.vn/bai-hat/Yeu-Voi-Huyen-Thoai/ZUAU8698.html","modifiedTime":1635509967000,"radioPid":1462832212,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/f/e/6/c/fe6ce29f578f8b2ca713d0f5865e75c8.lrc","lyricId":"7134159","downloadTypes":"128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6374,"hLyricVersion":1635509967,"releaseTime":1635494400000,"kaka":{"schemeAndroid":"kaka://beat_detail?id=IWZBE6EF&src=[source]","schemeIos":"kahat://beat_detail?id=IWZBE6EF&src=[source]"},"status":1,"playStatus":2,"downloadStatus":2},{"type":1,"id":1078136729,"title":"Vội Vàng","artists":[{"id":68284,"name":"JUUN D","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/b/b/2/9/bb299a38d1888a825c64f04ae843672d.jpg","oaId":68284,"followers":29354},{"id":54452,"name":"Rtee","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/7/5/6/7/756725406874aebe3456d9577a9418c1.jpg","oaId":54452,"followers":16073}],"albums":[{"id":1097805882,"title":"Yêu Bạn Được Không? (Friendzone) (Single)"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_jpeg/cover/4/4/b/6/44b687b14dfceacf911652f9d0132735.jpg","duration":204,"link":"https://zingmp3.vn/bai-hat/Voi-Vang-JUUN-D-Rtee/ZW9C60I9.html","modifiedTime":1608023570000,"radioPid":1285908674,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/0/2/9/6/029606be835d50f15cc2b16740e0cda9.lrc","lyricId":"7040228","downloadTypes":"64,128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6254,"hLyricVersion":21,"status":1,"playStatus":2,"downloadStatus":2,"video":{"status":1,"playStatus":2,"downloadStatus":2}},{"type":1,"id":1073910659,"title":"Đừng Vội Vàng","artists":[{"id":1334,"name":"Hoàng Thùy Linh","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/d/3/d3c93c670a19d6b3bfd3a6d7a4e2f3e2_1490171053.jpg","oaId":1334,"followers":56284}],"albums":[{"id":1073760222,"title":"Đừng Vội Vàng"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_jpeg/covers/d/f/df1c374b309315d4c138b5b6cbe8408f_1305774310.jpg","duration":257,"link":"https://zingmp3.vn/bai-hat/Dung-Voi-Vang-Hoang-Thuy-Linh/ZWZBEU0O.html","modifiedTime":1608047219000,"radioPid":1282655499,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/2015/d/f/df0006fe120c39b122092895fc28b79e_1073910659.lrc","lyricId":"2168835","downloadTypes":"64,128,320","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6254,"hLyricVersion":21,"releaseTime":1293814800000,"kaka":{"schemeAndroid":"kaka://beat_detail?id=IWZAZOCE&src=[source]","schemeIos":"kahat://beat_detail?id=IWZAZOCE&src=[source]"},"status":1,"playStatus":2,"downloadStatus":2,"video":{"status":1,"playStatus":2,"downloadStatus":2}},{"type":1,"id":1075466738,"title":"Chưa Yêu Vội","artists":[{"id":5007,"name":"Emily","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/f/7/f7fae3b7d3de4b40f39ece35095b2cd1_1472618688.jpg","oaId":5007,"followers":25309},{"id":6416,"name":"Hạnh Sino","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/7/b/7b0beb52de5a2f2b4037dda7c3200437_1515119282.jpg","oaId":6416,"followers":7595}],"albums":[],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":66,"name":"Dance Việt","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/8\/6\/f\/d\/86fdf54a8288b33ce6a6f05c5ae27884.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_jpeg/avatars/f/7/f7fae3b7d3de4b40f39ece35095b2cd1_1472618688.jpg","duration":219,"link":"https://zingmp3.vn/bai-hat/Chua-Yeu-Voi-Emily-Hanh-Sino/ZW7OAW7W.html","modifiedTime":1608030396000,"radioPid":1285132227,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/2016/3/0/30e8e2f3d79cc508dd1a8367eef57da3_1075466738.lrc","lyricId":"3724914","downloadTypes":"64,128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6246,"hLyricVersion":21,"kaka":{"schemeAndroid":"kaka://beat_detail?id=IWZA7CB7&src=[source]","schemeIos":"kahat://beat_detail?id=IWZA7CB7&src=[source]"},"status":1,"playStatus":2,"downloadStatus":2},{"type":1,"id":1076387637,"title":"Vội Vàng","artists":[{"id":6104,"name":"Tiêu Châu Như Quỳnh","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/4/d/5/4/4d54c9e333060731dbf67c275f410a30.jpg","oaId":6104,"followers":2621}],"albums":[{"id":1091577537,"title":"Hãy Về Với Em"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":12109,"name":"V-Pop","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/5\/0\/5\/1\/50515f6e2cf3a1293344d6241d13d33f.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_jpeg/covers/c/b/cbc93367d52a046fa172d93feae723c3_1506067704.jpg","duration":258,"link":"https://zingmp3.vn/bai-hat/Voi-Vang-Tieu-Chau-Nhu-Quynh/ZW8IAFBZ.html","modifiedTime":1608025105000,"radioPid":1285834799,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/2017/10/02/64b4f6cf63ce7282257314f7f9aa5556_1076387637.lrc","lyricId":"7001477","downloadTypes":"128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6246,"status":1,"playStatus":2,"downloadStatus":2},{"type":1,"id":1112500408,"title":"Anh Yêu Vội Thế","artists":[{"id":1130534,"name":"LaLa Trần","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/3/8/3/b/383bfaafd9950db71b2ad4908013aa33.jpg","followers":1129}],"albums":[{"id":1462611956,"title":"Anh Yêu Vội Thế (Single)"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":12109,"name":"V-Pop","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/5\/0\/5\/1\/50515f6e2cf3a1293344d6241d13d33f.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_jpeg/cover/2/9/8/e/298e3fa437530f9a712cab992ea15841.jpg","duration":298,"link":"https://zingmp3.vn/bai-hat/Anh-Yeu-Voi-The-LaLa-Tran/ZUA8B9O8.html","modifiedTime":1635819155000,"radioPid":0,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/7/2/2/2/7222499b480f3832c61ee0a3c3d09542.lrc","lyricId":"7134288","downloadTypes":"128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":4326,"hLyricVersion":1635819155,"releaseTime":1635814800000,"status":1,"playStatus":2,"downloadStatus":2},{"type":1,"id":1076334364,"title":"Mashup Yêu Vội Vàng - Hỏi Thăm Nhau","artists":[{"id":429263,"name":"Kenbi Trần","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/f/3/1/f/f31fddd794655824186d7c91a4038344.jpg","followers":1264}],"albums":[{"id":1091269581,"title":"Mashup Yêu Vội Vàng (Single)"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":12109,"name":"V-Pop","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/5\/0\/5\/1\/50515f6e2cf3a1293344d6241d13d33f.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_jpeg/covers/0/9/090ea53d58d1f75e838966a586e1aa00_1501648259.jpg","duration":303,"link":"https://zingmp3.vn/bai-hat/Mashup-Yeu-Voi-Vang-Hoi-Tham-Nhau-Kenbi-Tran/ZW80DF9C.html","modifiedTime":1608025391000,"radioPid":1285821625,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/2017/08/24/ff470e73ed4bbda5ddb46d965c8eb5f0_1076334364.lrc","lyricId":"5075584","downloadTypes":"128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6246,"hLyricVersion":21,"status":1,"playStatus":2,"downloadStatus":2},{"type":1,"id":1076387638,"title":"Vội Vàng","artists":[{"id":6104,"name":"Tiêu Châu Như Quỳnh","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/4/d/5/4/4d54c9e333060731dbf67c275f410a30.jpg","oaId":6104,"followers":2621},{"id":71849,"name":"Trí Nhân","avatar":"https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/avatars/e/1/e1388022b30127d7997ebcee8e46cdaf_1450060442.jpg","followers":41}],"albums":[{"id":1091577537,"title":"Hãy Về Với Em"}],"genres":[{"id":1,"name":"Việt Nam","thumbS":""},{"id":12109,"name":"V-Pop","thumbS":"https:\/\/photo-resize-zmp3.zadn.vn\/w600_r1x1_jpeg\/cover\/5\/0\/5\/1\/50515f6e2cf3a1293344d6241d13d33f.jpg"}],"thumb":"https://photo-resize-zmp3.zadn.vn/w600_r1x1_jpeg/covers/c/b/cbc93367d52a046fa172d93feae723c3_1506067704.jpg","duration":258,"link":"https://zingmp3.vn/bai-hat/Voi-Vang-Tieu-Chau-Nhu-Quynh-Tri-Nhan/ZW8IAFB6.html","modifiedTime":1608025105000,"radioPid":1285834800,"lyricLink":"https://static-zmp3.zadn.vn/lyrics/2017/10/02/e3bc967289b5e932e7505394d068364e_1076387638.lrc","lyricId":"7001475","downloadTypes":"128,320,lossless,m4a","disSPlatform":0,"disDPlatform":0,"orgMD5":"","userId":0,"euId":"1f2d93c7af8246dc1f93","privacy":1,"boolAtt":6246,"status":1,"playStatus":2,"downloadStatus":2}],"lastIndex":20,"isMore":true}}
	*/
	req, err := http.NewRequest(http.MethodGet, url, nil)
	require.NoError(t, err)

	for k, v := range m {
		req.Header.Set(k, v)
	}
	req.Header.Set("publickey", publicKey1)

	resp, err := http.DefaultClient.Do(req)
	require.NoError(t, err)

	defer resp.Body.Close()
	_, err = io.Copy(os.Stdout, resp.Body)
	require.NoError(t, err)

	url = fmt.Sprintf("https://api.zingmp3.app/v1/song/core/get/detail?sig=%s&cTime=1637095026330&id=1075525434&publicKey=%s", sig, publicKey2)

	req, err = http.NewRequest(http.MethodGet, url, nil)
	require.NoError(t, err)

	for k, v := range m {
		req.Header.Set(k, v)
	}
	req.Header.Set("publickey", publicKey1)

	resp, err = http.DefaultClient.Do(req)
	require.NoError(t, err)

	defer resp.Body.Close()
	_, err = io.Copy(os.Stdout, resp.Body)
	require.NoError(t, err)
}
